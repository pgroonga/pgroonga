repos:
  - repo: https://github.com/pre-commit/mirrors-clang-format
    rev: "v18.1.4"
    hooks:
      - id: clang-format
  - repo: local
    hooks:
      - id: lint
        name: Lint
        language: system
        entry: |
          rake lint
        always_run: true
        pass_filenames: false
  - repo: local
    hooks:
      - id: test-pair
        name: Check that `sql/**/*.sql` and `expected/**/*.out` are paired
        language: system
        entry: |
          bash -c " \
            diff -u \
              <(cd sql && find . -type f | sed -e 's/\.sql/.out/g' | sort) \
              <(cd expected && find . -type f | sort)"
        always_run: true
        pass_filenames: false

exclude: "^vendor/.*"
